<form class="course-form" [formGroup]="courseFormGroup" (ngSubmit)="onSubmit()">
  <mat-card class="course-card">
    <mat-card-header>
      <mat-card-title>Курс</mat-card-title>
      <mat-card-subtitle>Редактирование</mat-card-subtitle>
    </mat-card-header>

    <mat-card-content>
        <mat-grid-list cols="12" rowHeight="70px">

          <mat-grid-tile [colspan]="12" [rowspan]="1">
            <mat-form-field class="course-full-width" appearance="fill">
              <mat-label>Название</mat-label>
              <input matInput placeholder="title" formControlName="titleCtrl">
            </mat-form-field>
          </mat-grid-tile>

          <mat-grid-tile [colspan]="8" [rowspan]="1">
            <mat-form-field class="course-full-width" appearance="fill">
              <mat-label>Издательство</mat-label>
              <mat-select formControlName="publisherCtrl">
                <mat-option *ngFor="let pub of publishers" [value]="pub.id">{{pub.name}}</mat-option>
              </mat-select>
            </mat-form-field>
          </mat-grid-tile>
          <mat-grid-tile [colspan]="2" [rowspan]="1">
            <mat-form-field class="course-full-width" appearance="fill">
              <mat-label>Год</mat-label>
              <input type="number" matInput placeholder="year" formControlName="yearCtrl">
            </mat-form-field>
          </mat-grid-tile>
          <mat-grid-tile [colspan]="2" [rowspan]="1">
            <mat-form-field class="course-full-width" appearance="fill">
              <mat-label>Продолжительность (мин)</mat-label>
              <input type="number" matInput placeholder="duration" formControlName="durationCtrl">
            </mat-form-field>
          </mat-grid-tile>

          <mat-grid-tile [colspan]="6" [rowspan]="1">
            <mat-form-field class="course-full-width" appearance="fill">
              <mat-label>Оценка</mat-label>
              <mat-select formControlName="rateCtrl">
                <mat-option *ngFor="let ind of rateKeys" [value]="ind">{{rateValues[ind]}}</mat-option>
              </mat-select>
            </mat-form-field>
          </mat-grid-tile>
          <mat-grid-tile [colspan]="6" [rowspan]="1">
            <mat-form-field class="course-full-width" appearance="fill">
              <mat-label>Состояние</mat-label>
              <mat-select formControlName="stateCtrl">
                <mat-option *ngFor="let ind of stateKeys" [value]="ind">{{stateValues[ind]}}</mat-option>
              </mat-select>
            </mat-form-field>
          </mat-grid-tile>

          <mat-grid-tile [colspan]="4" [rowspan]="1">
            <mat-form-field class="course-full-width">
              <mat-label>Папка курса</mat-label>
              <input matInput formControlName="coursePathCtrl">
              <button mat-icon-button matSuffix (click)="coursePathInput.click()">
                <mat-icon>file_upload</mat-icon>
              </button>
              <input hidden (change)="selectCoursePath($event)" #coursePathInput type="file" id="coursePath">
            </mat-form-field>
          </mat-grid-tile>
          <mat-grid-tile [colspan]="4" [rowspan]="1">
            <mat-form-field class="course-full-width">
              <mat-label>Файл содержания</mat-label>
              <input matInput formControlName="contentFileCtrl">
              <button mat-icon-button matSuffix (click)="contentFileInput.click()">
                <mat-icon>attach_file</mat-icon>
              </button>
              <input hidden (change)="selectContentFile($event)" #contentFileInput type="file" id="contentFile">
            </mat-form-field>
          </mat-grid-tile>
          <mat-grid-tile [colspan]="4" [rowspan]="1">
            <mat-form-field class="course-full-width">
              <mat-label>Файл описания</mat-label>
              <input matInput formControlName="descriptFileCtrl">
              <button mat-icon-button matSuffix (click)="descriptFileInput.click()">
                <mat-icon>attach_file</mat-icon>
              </button>
              <input hidden (change)="selectDescriptFile($event)" #descriptFileInput type="file" id="descriptFile">
            </mat-form-field>
          </mat-grid-tile>

          <mat-grid-tile [colspan]="12" [rowspan]="1">
            <mat-form-field class="course-full-width" appearance="fill">
              <mat-label>Тэги</mat-label>
              <mat-chip-list #chipList aria-label="Выбор тэгов">
                <mat-chip
                  *ngFor="let tag of tags"
                  [selectable]="selectable"
                  [removable]="removable"
                  (removed)="remove(tag)">
                  {{tag}}
                  <button matChipRemove *ngIf="removable">
                    <mat-icon>cancel</mat-icon>
                  </button>
                </mat-chip>
                <input
                  placeholder="Добавить тэг..."
                  #tagInput
                  formControlName="tagCtrl"
                  [matAutocomplete]="auto"
                  [matChipInputFor]="chipList"
                  [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                  (matChipInputTokenEnd)="add($event)">
              </mat-chip-list>
              <mat-autocomplete #auto="matAutocomplete" (optionSelected)="selected($event)">
                <mat-option *ngFor="let tag of filteredTags | async" [value]="tag" [disabled]="disableTag(tag)">
                  {{tag}}
                </mat-option>
              </mat-autocomplete>
            </mat-form-field>
          </mat-grid-tile>
        </mat-grid-list>

    </mat-card-content>

    <mat-card-actions align="end">
      <button mat-fab color="warn">
        <mat-icon>delete</mat-icon>
      </button>
      <button type="submit" mat-fab color="accent" [disabled]="!courseFormGroup.valid">
        <mat-icon>save</mat-icon>
      </button>
      <button mat-fab color="primary" [routerLink]="['/home']">
        <mat-icon>home</mat-icon>
      </button>
    </mat-card-actions>
  </mat-card>

</form>
